#burndown-chart

%script(type="text/javascript" src="https://www.google.com/jsapi")

:javascript
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);

  function drawChart() {
    var jsonData = $.parseJSON($.ajax({
      url: "#{metrics_burndown_path(@burndown, format: :json)}",
      dataType: "json",
      async: false,
    }).responseText);

    console.log(typeof jsonData);

    var data = google.visualization.arrayToDataTable(jsonData);

    options = {
      isStacked: true,
      // Unstarted, Started, Finished, Delivered, Accepted, Rejected
      colors: ['#3751A8', '#4AB2D5', '#FBE151', '#C3E94F', '#93BC17', '#F93C3C'],
      hAxis: {
        slantedText: true,
        slantedTextAngle: 30
      }
    };

    var chart = new google.visualization.ColumnChart(document.getElementById('burndown-chart'));
    chart.draw(data, options);
  }

